<div class="kh-brand kh-brand--stacked">
  {% set _logo = logo_url or logo %}
  {% if _logo %}
    <a class="kh-brand__logo" href="{{ pathto(master_doc) }}">
      <img src="{{ pathto(_logo, 1) }}" alt="Profile photo">
    </a>
  {% endif %}

  {% set p = kh_profile if kh_profile is defined else {'name':'', 'lines':[], 'details':[]} %}

  <div class="kh-brand__text">
    <div class="kh-brand__name">{{ p.name }}</div>

    <div class="kh-brand__sub">
      {% for line in p.lines %}
        {{ line }}{% if not loop.last %}<br>{% endif %}
      {% endfor %}
    </div>

    {% if p.details and p.details|length > 0 %}
      <ul class="kh-brand__details" aria-label="Profile details">
        {% for item in p.details %}
          <li class="kh-detail">
            <span class="kh-icon" aria-hidden="true">
              {% if item.icon == "map" %}
                <svg viewBox="0 0 24 24"><path d="M12 22s7-5.2 7-12a7 7 0 1 0-14 0c0 6.8 7 12 7 12Zm0-9a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z"/></svg>
              {% elif item.icon == "home" %}
                <svg viewBox="0 0 24 24"><path d="M12 2 2 7v2h20V7L12 2Zm-8 9v9h4v-6h8v6h4v-9H4Z"/></svg>
              {% elif item.icon == "link" %}
                <svg viewBox="0 0 24 24"><path d="M3.9 12a5 5 0 0 1 5-5h3v2h-3a3 3 0 1 0 0 6h3v2h-3a5 5 0 0 1-5-5Zm7-1h3v2h-3v-2Zm4.1-4h3a5 5 0 1 1 0 10h-3v-2h3a3 3 0 1 0 0-6h-3V7Z"/></svg>
              {% elif item.icon == "mail" %}
                <svg viewBox="0 0 24 24"><path d="M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2Zm0 4-8 5L4 8V6l8 5 8-5v2Z"/></svg>
              {% elif item.icon == "github" %}
                <svg viewBox="0 0 24 24"><path d="M12 2a10 10 0 0 0-3.2 19.5c.5.1.7-.2.7-.5v-1.8c-3 .7-3.6-1.3-3.6-1.3-.5-1.2-1.2-1.5-1.2-1.5-1-.7.1-.7.1-.7 1.1.1 1.7 1.1 1.7 1.1 1 .1 1.5-.7 1.5-.7.2-.7.5-1.1.9-1.3-2.4-.3-4.9-1.2-4.9-5.3 0-1.2.4-2.2 1.1-3-.1-.3-.5-1.4.1-2.9 0 0 .9-.3 3 .1a10.3 10.3 0 0 1 5.5 0c2.1-.4 3-.1 3-.1.6 1.5.2 2.6.1 2.9.7.8 1.1 1.8 1.1 3 0 4.1-2.5 5-4.9 5.3.5.4 1 .9 1 2v3c0 .3.2.6.7.5A10 10 0 0 0 12 2Z"/></svg>
              {% elif item.icon == "twitter" %}
                <svg viewBox="0 0 24 24"><path d="M22 5.8c-.7.3-1.4.5-2.2.6.8-.5 1.3-1.2 1.6-2.1-.7.4-1.5.8-2.4.9A3.6 3.6 0 0 0 12.7 8c0 .3 0 .6.1.9A10.2 10.2 0 0 1 3 4.9a3.6 3.6 0 0 0 1.1 4.8c-.6 0-1.2-.2-1.7-.5v.1c0 1.7 1.2 3.1 2.8 3.4-.5.1-1 .1-1.5.1.4 1.4 1.8 2.4 3.3 2.4A7.2 7.2 0 0 1 2 17.3 10.2 10.2 0 0 0 7.5 19c6.6 0 10.2-5.6 10.2-10.4v-.5c.7-.5 1.3-1.2 1.8-2Z"/></svg>
              {% elif item.icon == "scholar" %}
                <svg viewBox="0 0 24 24"><path d="M12 3 2 8l10 5 10-5-10-5Zm0 7L4 6.5V17c0 .6.3 1.1.8 1.4C6.5 19.5 9 21 12 21s5.5-1.5 7.2-2.6c.5-.3.8-.8.8-1.4V6.5L12 10Z"/></svg>
              {% elif item.icon == "orcid" %}
                <svg viewBox="0 0 24 24"><path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20Zm-3 6.2c0-.6.5-1.1 1.1-1.1s1.1.5 1.1 1.1S10.7 9.3 10.1 9.3 9 8.8 9 8.2ZM9.3 18V10h1.6v8H9.3Zm3-8h2.7c2.2 0 3.7 1.5 3.7 3.9S17.2 18 15 18h-2.7V10Zm1.6 1.4v5.2h1.1c1.2 0 2-.9 2-2.6s-.8-2.6-2-2.6h-1.1Z"/></svg>
              {% else %}
                <svg viewBox="0 0 24 24"><path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20Z"/></svg>
              {% endif %}
            </span>

            {% if item.href is defined and item.href %}
              <a href="{{ item.href }}" rel="me">{{ item.text }}</a>
            {% else %}
              <span>{{ item.text }}</span>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    {% endif %}
  </div>
</div>
